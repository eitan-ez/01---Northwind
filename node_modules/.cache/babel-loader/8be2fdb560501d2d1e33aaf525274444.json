{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Eitan\\\\Documents\\\\JohnBryce\\\\React\\\\01 - Northwind\\\\src\\\\Components\\\\ProductsArea\\\\ProductList\\\\ProductList.tsx\";\nimport { AddBox } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { productsDownloadedAction } from \"../../../Redux/ProductsState\";\nimport store from \"../../../Redux/Store\";\nimport globals from \"../../../Services/Globals\";\nimport ProductCard from \"../ProductCard/ProductCard\";\nimport \"./ProductList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProductList extends Component {\n  constructor(props) {\n    super(props); // this.state = { products: [] }; // Without Redux\n\n    this.state = {\n      products: store.getState().productsState.products\n    }; // With Redux\n  } // Without Redux: \n  // public async componentDidMount() {\n  //     try {\n  //         const response = await axios.get<ProductModel[]>(globals.urls.products); // הפקודה הזו תמתין אך הדפדפן לא יתקע\n  //         this.setState({ products: response.data });\n  //     }\n  //     catch (err) {\n  //         alert(\"Error: \" + err.message);\n  //     }\n  // }\n  // With Redux: \n\n\n  async componentDidMount() {\n    try {\n      // Only if we don't have our products in the AppState - get them from the server:\n      if (store.getState().productsState.products.length === 0) {\n        // Get products from the server: \n        const response = await axios.get(globals.urls.products); // הפקודה הזו תמתין אך הדפדפן לא יתקע\n        // Update AppState:\n\n        store.dispatch(productsDownloadedAction(response.data)); // Update local state: \n\n        this.setState({\n          products: response.data\n        });\n      }\n    } catch (err) {\n      alert(\"Error: \" + err.message);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ProductList\",\n      children: [/*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/products/new\",\n        children: /*#__PURE__*/_jsxDEV(AddBox, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), this.state.products.map(p => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: p\n      }, p.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 47\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ProductList;","map":{"version":3,"sources":["C:/Users/Eitan/Documents/JohnBryce/React/01 - Northwind/src/Components/ProductsArea/ProductList/ProductList.tsx"],"names":["AddBox","axios","Component","NavLink","productsDownloadedAction","store","globals","ProductCard","ProductList","constructor","props","state","products","getState","productsState","componentDidMount","length","response","get","urls","dispatch","data","setState","err","alert","message","render","map","p","id"],"mappings":";AAAA,SAASA,MAAT,QAAuB,oBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,OAAT,QAAwB,kBAAxB;AAEA,SAASC,wBAAT,QAAyC,8BAAzC;AACA,OAAOC,KAAP,MAAkB,sBAAlB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAO,mBAAP;;;AAMA,MAAMC,WAAN,SAA0BN,SAA1B,CAA0D;AAE/CO,EAAAA,WAAW,CAACC,KAAD,EAAY;AAC1B,UAAMA,KAAN,EAD0B,CAE1B;;AACA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,QAAQ,EAAEP,KAAK,CAACQ,QAAN,GAAiBC,aAAjB,CAA+BF;AAA3C,KAAb,CAH0B,CAG0C;AACvE,GANqD,CAQtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AAC8B,QAAjBG,iBAAiB,GAAG;AAC7B,QAAI;AACA;AACA,UAAIV,KAAK,CAACQ,QAAN,GAAiBC,aAAjB,CAA+BF,QAA/B,CAAwCI,MAAxC,KAAmD,CAAvD,EAA0D;AAEtD;AACA,cAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAN,CAA0BZ,OAAO,CAACa,IAAR,CAAaP,QAAvC,CAAvB,CAHsD,CAGmB;AAEzE;;AACAP,QAAAA,KAAK,CAACe,QAAN,CAAehB,wBAAwB,CAACa,QAAQ,CAACI,IAAV,CAAvC,EANsD,CAQtD;;AACA,aAAKC,QAAL,CAAc;AAAEV,UAAAA,QAAQ,EAAEK,QAAQ,CAACI;AAArB,SAAd;AACH;AACJ,KAbD,CAcA,OAAOE,GAAP,EAAY;AACRC,MAAAA,KAAK,CAAC,YAAYD,GAAG,CAACE,OAAjB,CAAL;AACH;AACJ;;AAEMC,EAAAA,MAAM,GAAgB;AACzB,wBACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,8BAEI,QAAC,OAAD;AAAS,QAAA,EAAE,EAAC,eAAZ;AAAA,+BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ,EAMK,KAAKf,KAAL,CAAWC,QAAX,CAAoBe,GAApB,CAAwBC,CAAC,iBAAI,QAAC,WAAD;AAAwB,QAAA,OAAO,EAAEA;AAAjC,SAAkBA,CAAC,CAACC,EAApB;AAAA;AAAA;AAAA;AAAA,cAA7B,CANL;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAUH;;AAnDqD;;AAsD1D,eAAerB,WAAf","sourcesContent":["import { AddBox } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport ProductModel from \"../../../Models/ProductModel\";\nimport { productsDownloadedAction } from \"../../../Redux/ProductsState\";\nimport store from \"../../../Redux/Store\";\nimport globals from \"../../../Services/Globals\";\nimport ProductCard from \"../ProductCard/ProductCard\";\nimport \"./ProductList.css\";\n\ninterface ProductListState {\n    products: ProductModel[];\n}\n\nclass ProductList extends Component<{}, ProductListState> {\n\n    public constructor(props: {}) {\n        super(props);\n        // this.state = { products: [] }; // Without Redux\n        this.state = { products: store.getState().productsState.products }; // With Redux\n    }\n\n    // Without Redux: \n    // public async componentDidMount() {\n    //     try {\n    //         const response = await axios.get<ProductModel[]>(globals.urls.products); // הפקודה הזו תמתין אך הדפדפן לא יתקע\n    //         this.setState({ products: response.data });\n    //     }\n    //     catch (err) {\n    //         alert(\"Error: \" + err.message);\n    //     }\n    // }\n\n    // With Redux: \n    public async componentDidMount() {\n        try {\n            // Only if we don't have our products in the AppState - get them from the server:\n            if (store.getState().productsState.products.length === 0) {\n\n                // Get products from the server: \n                const response = await axios.get<ProductModel[]>(globals.urls.products); // הפקודה הזו תמתין אך הדפדפן לא יתקע\n\n                // Update AppState:\n                store.dispatch(productsDownloadedAction(response.data));\n\n                // Update local state: \n                this.setState({ products: response.data });\n            }\n        }\n        catch (err) {\n            alert(\"Error: \" + err.message);\n        }\n    }\n\n    public render(): JSX.Element {\n        return (\n            <div className=\"ProductList\">\n\n                <NavLink to=\"/products/new\">\n                    <AddBox />\n                </NavLink>\n\n                {this.state.products.map(p => <ProductCard key={p.id} product={p} />)}\n            </div>\n        );\n    }\n}\n\nexport default ProductList;\n"]},"metadata":{},"sourceType":"module"}